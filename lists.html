<!DOCTYPE html>

<html>

<head>
    <title>VegiSmart | Lists</title>
    <!-- Bootstrap 4 alpha CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans|Roboto" rel="stylesheet">
    <!--Stylesheets-->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/3/w3.css">
    <link href="style/base.css" rel="stylesheet" type="text/css">
    <meta charset="utf-8">

    <!-- Fav Icons-->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.3.3/vue.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.9.0/firebase.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/vuefire/1.4.2/vuefire.min.js"></script>
    <style>
        #listItem {
            border: none;
        }

    </style>

</head>

<body>


    <!-- Slideout menu -->
    <nav id="menu">
        <header>
            <ul class="menuVertical">
                <div class="menuLinks">
                    <a href="index.html">
                        <li><img class="menuIcon" src="images/Icon%20Assets/menuHome.png">
                            <span class="menuPageNames">Home</span>
                        </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="lists.html">
                        <li><img class="menuIcon" src="images/Icon%20Assets/menuList.png">
                            <span class="menuPageNames">My List</span>
                        </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="fridge.html">
                        <li><img class="menuIcon" id="fridgeIcon" src="images/Icon%20Assets/menuFridge.png">
                            <span class="menuPageNames">My Fridge</span>
                        </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="stats.html">
                        <li><img class="menuIcon" id="statsIcon" src="images/Icon%20Assets/menuStats.png">
                            <span class="menuPageNames">Reports</span>
                        </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="info.html">
                        <li><img class="menuIcon" id="infoIcon" src="images/Icon%20Assets/menuInfo.png">
                            <span class="menuPageNames">Info &amp; Tips</span>
                        </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="login.html">
                        <li><img class="menuIcon" id="loginIcon" src="images/Icon%20Assets/menuLogin.png">
                            <span class="menuPageNames">Login</span>
                        </li>
                    </a>
                </div>
                <hr>
            </ul>

        </header>
    </nav>

    <!-- main page content area -->

    <!-- header -->
    <main id="panel">
        <header>
            <div class="topNav">
                <div class="menuButton">
                    <button class="toggle-button"><img src="images/Icon%20Assets/menu.png"></button>
                </div>
                <div class="menuTitle">
                    <h1 id="navTitle"><i class="fa fa-list-alt" aria-hidden="true"></i> My Lists</h1>
                </div>
            </div>
        </header>


        <!--
        <div id="container">
            <div class="contentWrap">
                <div id="center">
                    <i class="fa fa-plus" aria-hidden="true"></i>
                    <input type="text" v-on:keyup.enter="addList" v-model="newListText" id="addAnItem" placeholder="Add A List"> </div>

                <div id="infoText">





                    <template v-for="(list,index) in lists">
              
           <a :href="'#' + 'my'+ index" class="" data-toggle="collapse"> <h3 id="info" >
               
               {{list.name}}
               <i id="carat" class="fa fa-caret-down" aria-hidden="true"></i>
               </h3></a><br>
                
                
              <div v-bind:id=" 'my' + index" class="collapse" v-bind:class="noCollapse(index)">
                  
     
                 
                  
                  <div id="right" ><a @click="removeList(index)" id="removeList"href="#"><i class="fa fa-times" aria-hidden="true"></i> Remove List</a></div>
                  
                  
              <div v-if="list.lunch.length > 0" >
                    <a @click="checkAll(index)" href="#" id="selectAll"><i class="fa fa-check-square checkAll" aria-hidden="true"></i> Select All</a>
                </div>
                  
              <template > 
                  
                  
               <ul id="">
                   
                   
                    <li @click="checkIt(index, index2)" id="listItem" v-for="(item,index2) in list.lunch">
                        
                         <i v-if="!item.checked" class="fa fa-square-o" aria-hidden="true"></i>
                        <i v-else class="fa fa-check-square-o" aria-hidden="true"></i>


                        <span v-if="item.checked"><s>
                            <span v-if="item.quantity != 0">{{item.quantity}}</span>  {{item.item}}</s></span>
                        
                        <span v-else> <span v-if="item.quantity != 0">{{item.quantity}}</span> {{item.item}}</span>
                    
                    </li>
                </ul>
                  
                  
              
              
              
              
            
      
              </template>
                    <div id="buttons">
                        <button v-if="anyChecked(index)" type="button" class="btn btn-sm">Add To Fridge</button>
                        <button v-if="anyChecked(index)" type="button" class="btn btn-sm" @click="remove(index)">Remove</button>


                    </div>
                </div>
                </template>
            </div>
        </div>
        </div>
-->

        <div id="container">
            <!--
            <div id="center">
                <i class="fa fa-plus" aria-hidden="true"></i>
                <input type="text" id="addAnItem" placeholder="Add A List" v-model.trim="newListName" @keyup.enter="addList"> </div>
-->
            <div id="center">

                <h3 id="info">Fruits
                </h3>

                <input id="addAnItem" placeholder="Add An Item" v-model.trim="newTodoTextF" @keyup.enter="addTodoF()" placeholder="Add new todo"></div>

            <ul>
                <template v-for="todo in fruits">
              <li @click="checkIt(todo, fruitsRef)" id="listItem">
                  
                   <i v-if="!todo.checked" class="fa fa-square-o" aria-hidden="true"></i>
                        <i v-else class="fa fa-check-square-o" aria-hidden="true"></i>
                  {{todo.text}} </li>
                    
                    
       

           </template>
                <div id="buttons">
                    <button v-if="anyChecked(fruitsRef)" type="button" class="btn btn-sm">Add To Fridge</button>
                    <button v-if="anyChecked(fruitsRef)" type="button" class="btn btn-sm" @click="removeChecked(fruits, fruitsRef)">Remove</button>


                </div>
            </ul>

            <!--             END FRUITS-->


            <div id="center">
                <h3 id="info">Vegetables
                </h3>
                <input id="addAnItem" placeholder="Add An Item" v-model.trim="newTodoTextV" @keyup.enter="addTodoV()" placeholder="Add new todo">
            </div>

            <ul>
                <template v-for="todo in vegs">
             
               <li @click="checkIt(todo, vegRef)" id="listItem">
                  
                   <i v-if="!todo.checked" class="fa fa-square-o" aria-hidden="true"></i>
                        <i v-else class="fa fa-check-square-o" aria-hidden="true"></i>
                  {{todo.text}} </li>
                    
                    
                    
        </template>
                <div id="buttons">
                    <button v-if="anyChecked(vegRef)" type="button" class="btn btn-sm">Add To Fridge</button>
                    <button v-if="anyChecked(vegRef)" type="button" class="btn btn-sm" @click="removeChecked(vegs, vegRef)">Remove</button>


                </div>
            </ul>




        </div>

    </main>


</body>





<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!-- Tether -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js" integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB" crossorigin="anonymous"></script>

<!-- Bootstrap 4 Alpha JS -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/js/bootstrap.min.js" integrity="sha384-VjEeINv9OSwtWFLAtmc4JCtEJXXBub00gtSnszmspDLCtC0I4z4nqz7rEFbIZLLU" crossorigin="anonymous"></script>

<script src="https://use.fontawesome.com/26ec5e6edd.js"></script>

<!-- Initialize Bootstrap functionality -->
<script>
    // Initialize tooltip component
    $(function() {
        $('[data-toggle="tooltip"]').tooltip()
    })

    // Initialize popover component
    $(function() {
        $('[data-toggle="popover"]').popover()
    })

</script>





<script>
    /* global Vue, firebase */
    var db = firebase.initializeApp({
        databaseURL: "https://vegismart-9265b.firebaseio.com"
    }).database()

    var fruitsRef = db.ref('Lists/Fruits');
    var listsRef = db.ref('Lists');
    var vegRef = db.ref('Lists/Vegetables');



    new Vue({
        el: '#container',
        data: {
            newTodoTextF: '',
            newTodoTextV: '',
            newListName: '',
            listName: fruitsRef.getKey()


        },
        firebase: {
            fruits: fruitsRef.limitToLast(25),
            lists: listsRef.limitToLast(25),
            vegs: vegRef.limitToLast(25)



        },
        methods: {
            addTodoF: function() {


                if (this.newTodoTextF) {
                    fruitsRef.push({
                        text: this.newTodoTextF,
                        checked: false
                    })
                    this.newTodoTextF = ''
                }
            },
            addTodoV: function() {



                if (this.newTodoTextV) {
                    vegRef.push({
                        text: this.newTodoTextV,
                        checked: false
                    })
                    this.newTodoTextV = ''
                }
            },
            addList: function() {
                if (this.newListName) {
                    listsRef.push({
                        name: this.newListName
                    })
                    this.newListName = ''
                }


            },
            removeTodo: function(todo, ref) {
                ref.child(todo['.key']).remove()
            },

            checkIt: function(todo, ref) {


                ref.once("value", function(snapshot) {


                        var i = snapshot.child(todo['.key']).child('checked').val();
                        if (i) ref.child(todo['.key']).child('checked').set(false)
                        else
                            ref.child(todo['.key']).child('checked').set(true)


                    }

                );



            },
            anyChecked: function(ref) {
                return true;

            },
            removeChecked: function(items, ref) {



                for (i = 0; i < items.length; i++) {

                    if (items[i].checked) {
                        var v = items[i]
                        ref.child(v['.key']).remove()
                        i--
                    }
                }




            },


            updateTodoText: function(todo, newText) {
                todosRef.child(todo['.key']).child('text').set(newText)
            },

            //TODO
            addToFridge: function() {

            }
        }
    })

</script>




<!-- slideout menu component -->
<script src="dist/slideout.min.js"></script>
<script>
    var slideout = new Slideout({
        'panel': document.getElementById('panel'),
        'menu': document.getElementById('menu'),
        'padding': 300,-
        'tolerance': 70
    });
    document.querySelector('.toggle-button').addEventListener('click', function() {
        slideout.toggle();
    });

</script>
