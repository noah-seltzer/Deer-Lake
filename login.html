<!DOCTYPE html>
<html>

<head>
    <title>VegiSmart | Login</title>
    <!-- Bootstrap 4 alpha CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans|Roboto" rel="stylesheet">
    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/3/w3.css">
    <link href="style/base.css" rel="stylesheet" type="text/css">
    <link href="style/login.css" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
        <!-- Fav Icons-->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="manifest.json">
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff"></head>

<body>
    <!-- Slideout menu -->
    <nav id="menu">
        <header>
            <ul class="menuVertical">
                <div class="menuLinks">
                    <a href="index.html">
                        <li><img class="menuIcon" src="images/Icon%20Assets/menuHome.png"> <span class="menuPageNames">Home</span> </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="lists.html">
                        <li><img class="menuIcon" src="images/Icon%20Assets/menuList.png"> <span class="menuPageNames">My List</span> </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="fridge.html">
                        <li><img class="menuIcon" id="fridgeIcon" src="images/Icon%20Assets/menuFridge.png"> <span class="menuPageNames">My Fridge</span> </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="stats.html">
                        <li><img class="menuIcon" id="statsIcon" src="images/Icon%20Assets/menuStats.png"> <span class="menuPageNames">Reports</span> </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="info.html">
                        <li><img class="menuIcon" id="infoIcon" src="images/Icon%20Assets/menuInfo.png"> <span class="menuPageNames">Info & Tips</span> </li>
                    </a>
                </div>
                <hr>
                <div class="menuLinks">
                    <a href="login.html">
                        <li><img class="menuIcon" id="loginIcon" src="images/Icon%20Assets/menuLogin.png"> <span class="menuPageNames">Login</span> </li>
                    </a>
                </div>
                <hr> </ul>
        </header>
    </nav>
    <!-- main page content area -->
    <!-- header -->
    <main id="panel">
        <header>
            <div class="topNav">
                <div class="menuButton">
                    <button class="toggle-button"><img src="images/Icon%20Assets/menu.png"></button>
                </div>
                <div class="menuTitle">
                    <h1 id="navTitle"><i class="fa fa-user-o" aria-hidden="true"></i> Login</h1> </div>
            </div>
        </header>
        <div class="container-fluid">
            <div id="container">
                <div class="row">
                    <div class="col-xs-12">
                        <div id="content"> <img src="images/Icon%20Assets/logo5Shadowxhdpi.png" alt="Logo" id="logo">
                            <div id="message"></div>
                            <form id="login" action="login.php" method="post">
                                <input type="text" id="username" class="textinput" name="Username" placeholder="Email" required>
                                <br>
                                <input type="password" id="password" class="textinput" name="Password" placeholder="Password" required>
                                <br>
                                <input class="button" type="submit" value="Login">
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" crossorigin="anonymous"></script>
<!-- Tether -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js" integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB" crossorigin="anonymous"></script>
<!-- Bootstrap 4 Alpha JS -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/js/bootstrap.min.js" integrity="sha384-VjEeINv9OSwtWFLAtmc4JCtEJXXBub00gtSnszmspDLCtC0I4z4nqz7rEFbIZLLU" crossorigin="anonymous"></script>
<script src="https://use.fontawesome.com/26ec5e6edd.js"></script>
<!-- Initialize Bootstrap functionality -->
<script>
    // Initialize tooltip component
    $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
        // Initialize popover component
    $(function () {
        $('[data-toggle="popover"]').popover()
    })
</script>
<!-- slideout menu component -->
<script src="dist/slideout.min.js"></script>
<script>
    var slideout = new Slideout({
        'panel': document.getElementById('panel')
        , 'menu': document.getElementById('menu')
        , 'padding': 300
        , 'tolerance': 70
    });
    document.querySelector('.toggle-button').addEventListener('click', function () {
        slideout.toggle();
    });
</script>
<script>
	//Waits for document to fully load
    $(document).ready(function () {
		//Hooks onto the form's submit button
        $("form").submit(function (event) {
            var formData = {
                Username: $("#username").val()
                , Password: $("#password").val()
            };
			//Send user-input to login php on server
            $.ajax({
                type: "POST"
                , url: "login.php"
                , data: formData
                , dataType: 'json'
                , encode: true
            })
			//Callback for when data is finished being sent and received
			.done(function (data) {
				//If the password does not match or email is not in database, print error
                if (data['success'] == false) {
                    $("#message").html("Email or password is incorrect!");
                    console.log(data);
                }
				//Redirects to index if all information is valid
                else {
                    $("#message").html("");
                    window.location.replace("index.html");
                }
            });
			//Prevent redirecting the page on submit button clicked
            event.preventDefault();
        });
    });
</script>