<!DOCTYPE html>

<html>

<head>
    <title>Waste Watcher</title>
    <!-- Bootstrap 4 alpha CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans|Roboto" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/3/w3.css">
    <link href="style/base.css" rel="stylesheet" type="text/css">
    <link href="style/fridge.css" rel="stylesheet" type="text/css">

    <meta charset="utf-8">
    <script src="vue.js"></script>
</head>

<body>
<nav>


    <h1>
        <a href="index.html"> <i class="back fa fa-arrow-left" aria-hidden="true"></i></a>
    </h1>

    <h1 id="navTitle"><i class="fa fa-list-alt" aria-hidden="true"></i> My Lists</h1>
</nav>
<div id="container">

    <div id="accordion">

        <h2 id="info">Lunch</h2>
        <div id="infoText" class="row">
            <div class="center">
                <input type="text" v-on:keyup.enter="addItem" v-model="newTodoText" id="addAnItem" placeholder="Add An Item"></div>


            <!--<div v-if="fridge.length > 0"@click="checkAll()">-->
                <!--<i class="fa fa-check-square checkAll" aria-hidden="true"></i> Select All-->
            <!--</div>-->
        <div class="col-xs-5">
        <ul @click="uncheckAll(k);checkIt(k)" v-for="(i, k) in fridge" class="no_bottom listItem">
                <li v-if="i.checked" id="selected"> <span v-if="i.quantity != 0">{{i.quantity}}<span v-if="i.large">%</span></span>  {{i.item}}</li>
                <li v-else> <span v-if="i.quantity != 0">{{i.quantity}}<span v-if="i.large">%</span></span> {{i.item}}</li>
        </ul></div>

        <div class="col-xs-6" v-for="(i,k) in fridge" class="center" id="quantityManager">
            <span v-if="i.checked" >{{i.item}} <br></span>
            <span v-if="i.checked" > Quantity: {{i.quantity}}<br></span>

            <span v-if="isCheckedAndSmall(k)" >
                <i class="fa fa-plus-circle fa-2x" @click="addQuantitySmall(k)"></i>
                <i class="fa fa-minus-circle fa-2x" @click="minusQuantitySmall(k)"></i><br>
            </span>





            <button v-if="isCheckedAndNotZero(k)" type="button"  class="btn btn-success" @click="throwOutRest(k)">Throw Out The Rest <i class="fa fa-trash-o" aria-hidden="true"></i></button>

        </div>
        <button v-if="anyChecked()" type="button" class="offset-xs-1 btn btn-success " >Add To Fridge</button>

    </div>




</div>
</div>







<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<!-- Tether -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js" integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB" crossorigin="anonymous"></script>

<!-- Bootstrap 4 Alpha JS -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/js/bootstrap.min.js" integrity="sha384-VjEeINv9OSwtWFLAtmc4JCtEJXXBub00gtSnszmspDLCtC0I4z4nqz7rEFbIZLLU" crossorigin="anonymous"></script>

<script src="https://use.fontawesome.com/26ec5e6edd.js"></script>

<!-- Initialize Bootstrap functionality -->
<script>
    // Initialize tooltip component
    $(function() {
        $('[data-toggle="tooltip"]').tooltip()
    })

    // Initialize popover component
    $(function() {
        $('[data-toggle="popover"]').popover()
    })
    //Slider for large fruits


</script>

<script>
    $(function() {
        $("#accordion").accordion({
            collapsible: true,
            heightStyle: "content",
            autoHeight: false,
            clearStyle: true,
        });
    });
    $(function() {
        $("#slider").slider({

        });
    });
</script>

<script type="text/javascript">
    new Vue({
        el: '#accordion',
        data: {
            newTodoText: '',
            fridge: [{
                quantity: 3,
                item: "Apples",
                checked: true,
                large: false
            }, {
                quantity: 0,
                item: "Eggs",
                checked: false,
                large: false
            },{
                quantity:45,
                item: "Eggplant",
                checked:false,
                large:true
            },{
                quantity: 4,
                item: "Bananas",
                checked: false,
                large: false
            }],
        },
        methods: {
            checkIt: function(index) {
                this.fridge[index].checked = !this.fridge[index].checked;
            },
            getChecked: function() {
                var vm = this;
                for (i = 0; i < vm.fridge.length; i++) {
                    if (vm.fridge[i].checked) return i;
                }
            },
            addItem: function() {
                var obj = {
                    quantity: 0,
                    item: this.newTodoText,
                    checked: false,
                    large:false
                }
                this.fridge.push(obj)
                this.newTodoText = '';
            },
            anyChecked: function() {
                var vm = this;
                for (i = 0; i < vm.fridge.length; i++) {
                    if (vm.fridge[i].checked) return true;
                }
            },
            uncheckAll: function(){
                var vm = this;
                for (i = 0; i < vm.fridge.length; i++) {
                    vm.fridge[i].checked = false;

                }
            },
            addQuantitySmall: function(index){
                var vm = this;
                vm.fridge[index].quantity += 1;
            },
            minusQuantitySmall: function(index){
                var vm = this;
                if(vm.fridge[index].quantity !== 0){

                 vm.fridge[index].quantity-= 1;}
            },
            isCheckedAndSmall: function(index) {
                return !this.fridge[index].large && this.fridge[index].checked;
            },
            isCheckedAndLarge: function(index) {
                return this.fridge[index].large && this.fridge[index].checked;
            },
            isCheckedAndNotZero: function(index) {
                return (this.fridge[index].quantity > 0) && this.fridge[index].checked;
            },
            throwOutRest: function(index) {
                this.fridge[index].quantity = 0;
                //TODO back end stuff
            },

            //TODO
            addToFridge: function() {},
            remove: function() {
                var vm = this;
                for (i = 0; i < vm.fridge.length; i++) {
                    if (vm.fridge[i].checked) {
                        vm.fridge.splice(i, 1)
                        i--
                    }
                }
            }
        }
    });
</script>