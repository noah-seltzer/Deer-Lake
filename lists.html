<!DOCTYPE html>

<html>

<head>
    <title>Waste Watcher</title>
    <!-- Bootstrap 4 alpha CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans|Roboto" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/3/w3.css">
    <link href="style/base.css" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <script src="vue.js"></script>
</head>

<body>


<!-- Slideout menu -->
<nav id="menu">
    <header>
        <ul class="menuVertical">
            <div class="menuLinks"><a href="index.html">
                <li><img class="menuIcon" src="images/Icon%20Assets/menuHome.png">
                    <span class="menuPageNames">Home</span>
                </li>
            </a>
            </div>
            <hr>
            <div class="menuLinks"><a href="lists.html">
                <li><img class="menuIcon" src="images/Icon%20Assets/menuList.png">
                    <span class="menuPageNames">My List</span>
                </li>
            </a>
            </div>
            <hr>
            <div class="menuLinks"><a href="fridge.html">
                <li><img class="menuIcon" id="fridgeIcon" src="images/Icon%20Assets/menuFridge.png">
                    <span class="menuPageNames">My Fridge</span>
                </li>
            </a>
            </div>
            <hr>
            <div class="menuLinks"><a href="stats.html">
                <li><img class="menuIcon" id="statsIcon" src="images/Icon%20Assets/menuStats.png">
                    <span class="menuPageNames">Reports</span>
                </li>
            </a>
            </div>
            <hr>
            <div class="menuLinks"><a href="info.html">
                <li><img class="menuIcon" id="infoIcon" src="images/Icon%20Assets/menuInfo.png">
                    <span class="menuPageNames">Info & Tips</span>
                </li>
            </a>
            </div>
            <hr>
            <div class="menuLinks"><a href="login.html">
                <li><img class="menuIcon" id="loginIcon" src="images/Icon%20Assets/menuLogin.png">
                    <span class="menuPageNames">Login</span>
                </li>
            </a>
            </div>
            <hr>
        </ul>

    </header>
</nav>

<!-- main page content area -->
        
<!-- header -->
<main id="panel">
    <header>
        <div class="topNav">
            <div class="menuButton">
                <button
                class="toggle-button"><img src="images/Icon%20Assets/menu.png"></button>
            </div>
            <div class="menuTitle">
            <h1 id="navTitle"><i class="fa fa-list-alt" aria-hidden="true"></i> My Lists</h1>
            </div>
        </div>
    </header>


    <div id="container">

        <div id="center">
<i class="fa fa-plus" aria-hidden="true"></i>
            <input type="text" v-on:keyup.enter="addList" v-model="newListText" id="addAnItem" placeholder= "Add A List"> </div>

        <div id="infoText">


  


            <template v-for="(list,index) in lists">
              
           <a :href="'#' + 'my'+ index" class="" data-toggle="collapse"> <h3 id="info" >
               
               {{list.name}}
               <i id="carat" class="fa fa-caret-down" aria-hidden="true"></i>
               </h3></a><br>
                
                
              <div v-bind:id=" 'my' + index" class="collapse" v-bind:class="noCollapse(index)">
                  
     
                 
              <div id="center">
                    <input type="text" v-on:keyup.enter="addItem(index)" v-model="newTodoText" id="addAnItem" placeholder="Add An Item">
              
              </div>
                  
                  <div id="right" ><a @click="removeList(index)" id="removeList"href="#"><i class="fa fa-times" aria-hidden="true"></i> Remove List</a></div>
                  
                  
              <div v-if="list.lunch.length > 0" >
                    <a @click="checkAll(index)" href="#" id="selectAll"><i class="fa fa-check-square checkAll" aria-hidden="true"></i> Select All</a>
                </div>
                  
              <template > 
                  
                  
               <ul id="">
                   
                   
                    <li @click="checkIt(index, index2)" id="listItem" v-for="(item,index2) in list.lunch">
                        
                         <i v-if="!item.checked" class="fa fa-square-o" aria-hidden="true"></i>
                        <i v-else class="fa fa-check-square-o" aria-hidden="true"></i>


                        <span v-if="item.checked"><s>
                            <span v-if="item.quantity != 0">{{item.quantity}}</span>  {{item.item}}</s></span>
                        
                        <span v-else> <span v-if="item.quantity != 0">{{item.quantity}}</span> {{item.item}}</span>
                    
                    </li>
                </ul>
                  
                  
              
              
              
              
            
      
              </template>
                  <div id="buttons">
            <button v-if="anyChecked(index)" type="button" class="btn btn-sm">Add To Fridge</button>
            <button v-if="anyChecked(index)" type="button" class="btn btn-sm" @click="remove(index)">Remove</button>
<!--                  <button v-if="anyChecked(index)" @click="removeList(index)" type="button" class="btn btn-warning btn-sm"> Remove List</button><br></div>-->
                  
                </div>
            </template>
        </div>
    </div>
</main>
</body>





        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <!-- Tether -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js" integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB" crossorigin="anonymous"></script>

        <!-- Bootstrap 4 Alpha JS -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/js/bootstrap.min.js" integrity="sha384-VjEeINv9OSwtWFLAtmc4JCtEJXXBub00gtSnszmspDLCtC0I4z4nqz7rEFbIZLLU" crossorigin="anonymous"></script>

        <script src="https://use.fontawesome.com/26ec5e6edd.js"></script>

        <!-- Initialize Bootstrap functionality -->
        <script>
            // Initialize tooltip component
            $(function() {
                $('[data-toggle="tooltip"]').tooltip()
            })

            // Initialize popover component
            $(function() {
                $('[data-toggle="popover"]').popover()
            })

        </script>


        <script type="text/javascript">
            new Vue({
                el: '#container',
                data: {
                    newTodoText0: '',

                    newListText: '',
                    /**
                     * Users Lists
                     */
                    lists: [{
                            name: "Shopping List",
                            lunch: [{
                                quantity: 4,
                                item: "Apples",
                                checked: false
                            }]
                        },
                        {
                            name: "Vegetables",

                            lunch: [{
                                quantity: 1,
                                item: "Bacons",
                                checked: false
                            }]
                        }
                    ],

                },
            
                methods: {
                    /**
                     * Checks that is clicked
                     * @param index
                     * @param index2
                     */
                    checkIt: function(index, index2) {
                        this.lists[index].lunch[index2].checked = !this.lists[index].lunch[index2].checked;
                    },
                    /**
                     * Don't collapse the first list
                     * @param i
                     * @returns {*}
                     */
                      noCollapse: function(i) {
                        if (i == 0)
                            return "in";
                          else return '';
                    },
                    /**
                     * Add an item to the current list
                     * @param index
                     */
                    addItem: function(index) {
                        var obj = {
                            quantity: 0,
                            item: this.newTodoText,
                            checked: false
                        }
                        this.lists[index].lunch.push(obj)
                        this.newTodoText = '';

                    },
                    /**
                     * Create and add a new list with empty items
                     */
                    addList: function() {
                        var obj = {
                            name: this.newListText,
                            lunch: []
                        }



                        this.lists.push(obj);
                        this.newListText = '';



                    },
                    /**
                     * Checks if any items in the current list has been selected
                     * @param index
                     * @returns {boolean}
                     */
                    anyChecked: function(index) {
                        var vm = this;
                        for (i = 0; i < vm.lists[index].lunch.length; i++) {
                            if (vm.lists[index].lunch[i].checked) return true;
                        }
                    },
                    /**
                     * Checks if all the items in the current list are selected
                     * @param index
                     * @returns {boolean}
                     */
                    allChecked: function(index) {
                        var vm = this;
                        for (i = 0; i < vm.lists[index].lunch.length; i++) {
                            if (!vm.lists[index].lunch[i].checked)
                                return false;


                        }
                        return true;
                    },


                    checkAll: function(index) {
                        var vm = this;

                        if (this.allChecked(index)) {
                            for (i = 0; i < vm.lists[index].lunch.length; i++) {
                                vm.lists[index].lunch[i].checked = false;


                            }
                        } else {
                            for (i = 0; i < vm.lists[index].lunch.length; i++) {
                                vm.lists[index].lunch[i].checked = true;
                            }


                        }
                    },
                    //TODO

                    addToFridge: function() {},

                    /**
                     * Remove the selected list
                     * @param index
                     */
                    removeList:function(index){
                        var vm =this;
                        vm.lists.splice(index, 1);
                        
                    }
            ,

                    remove: function(index) {
                        var vm = this;
                        for (i = 0; i < vm.lists[index].lunch.length; i++) {
                            if (vm.lists[index].lunch[i].checked) {
                                vm.lists[index].lunch.splice(i, 1)
                                i--
                            }
                        }
                    }
                }
            });

        </script>


<!-- slideout menu component -->
<script src="dist/slideout.min.js"></script>
<script>
    var slideout = new Slideout({
        'panel': document.getElementById('panel'),
        'menu': document.getElementById('menu'),
        'padding': 300,
        'tolerance': 70
    });
    document.querySelector('.toggle-button').addEventListener('click', function () {
        slideout.toggle();
    });
</script>
